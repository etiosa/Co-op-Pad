//TODO use the current code and split it to component and put it together here